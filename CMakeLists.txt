cmake_minimum_required(VERSION 3.22)

project (HMIP)

set_property(GLOBAL PROPERTY AUTOGEN_TARGETS_FOLDER "Custom Targets/Autogenerated")
set(CMAKE_INCLUDE_CURRENT_DIR ON)
set_property(GLOBAL PROPERTY USE_FOLDERS ON)
set(CMAKE_DEBUG_POSTFIX "d")
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/bin")
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/lib")
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}")

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

find_package(OpenSSL)
find_package(Threads)

if (UNIX)
    find_package(PkgConfig REQUIRED)
    pkg_check_modules(JSONCPP jsoncpp)
    add_definitions(-D_XOPEN_SOURCE=600) # strerror
    remove_definitions(2-D_GNU_SOURCE) # strerror
#else()
#    find_package(jsoncpp)# CONFIG REQUIRED)
endif()

add_subdirectory(app)
add_subdirectory(libraries)
add_subdirectory(test)

include (CTest)
